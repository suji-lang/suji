import std:println
import std:io

sink = || {
    return || {
        count = 0
        loop through io:stdin::read_lines() with line {
            count++
        }
        return count
    }
}

out = `printf 'a\nb\nc\n'` | sink()
println(out)  # 3
